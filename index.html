<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Mood tracker</title>
    </head>
    <body>
      <h1>Mood tracker</h1>

      <strong>Status:</strong><span id="status"></span><br/>

      <strong>Liczba podłączonych:</strong><span id="clients"></span>

      <script type="text/javascript">
        function setStatus(txt,el) {
          el = el || 'status';
          document.getElementById(el).textContent = txt;
        };

        var connection = new WebSocket("ws://localhost");
        connection.onopen = function() {
          setStatus('Connected');
        };
        connection.onerror = function(error) {
          setStatus('Error');
        };
        connection.onmessage = function(e) {
          var data = JSON.parse(e.data);

          setStatus('Got message: '+e.data);
          if (data.clientsCount) {
            setStatus(data.clientsCount,'clients');
          }

        };
      </script>
    </body>
</html>
